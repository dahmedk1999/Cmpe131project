<!DOCTYPE html>
<html>

<head>

  <style>
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
    #map {
      height: 100%;
    }

    /* Optional: Makes the sample page fill the window. */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <script>
    function makeInfoBox(controlDiv, map) {
      // Set CSS for the control border.
      var controlUI = document.createElement('div');
      controlUI.style.boxShadow = 'rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px';
      controlUI.style.backgroundColor = '#fff';
      controlUI.style.border = '2px solid #fff';
      controlUI.style.borderRadius = '2px';
      controlUI.style.marginBottom = '22px';
      controlUI.style.marginTop = '10px';
      controlUI.style.textAlign = 'center';
      controlDiv.appendChild(controlUI);
    }


    /**
     * Creates a map object with a click listener and a marker.
     */
    var myLatlng = new google.maps.LatLng(37.337341228, -121.8766039);
    var StartingMarker;
    var DestinationMarker;
    var directionsbetweenmarkers;
    var swap=0;
    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 37.337341228, lng: -121.8766039 },
        zoom: 12,
        styles: [{
          featureType: 'poi',
          stylers: [{ visibility: 'on' }]  // Turn on POI.
        },
        {
          featureType: 'transit.station',
          stylers: [{ visibility: 'on' }]  // Turn on bus, train stations etc.
        }],
        disableDoubleClickZoom: true,
        streetViewControl: true,
      });


      // Listen for clicks and add the location of the click to firebase.
      map.addListener('dblclick', function (event) {
        placeMarkers(event.latLng, map);

      });

      // Create starting and destination markers on double click.
      //If both markers are set, just move the previous marker
      function placeMarkers(location) {
        if (StartingMarker == null) {
          StartingMarker = new google.maps.Marker({
            position: location,
            map: map,
            draggable: true,
          });}
        else if (DestinationMarker==null)
        {
          DestinationMarker = new google.maps.Marker({
            position: location,
            map: map,
            draggable: true,
          });
        }
        else{
          if(!swap){
          DestinationMarker.setPosition(location);swap=1;}
          else if(swap){
          StartingMarker.setPosition(location);swap=0;}
        }
        
      }










    }
  </script>
  <script defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_eiQ1CH1VTFNnQLGLxigPL-F76Gplu0U&libraries=visualization&callback=initMap">
    </script>
</body>

</html>